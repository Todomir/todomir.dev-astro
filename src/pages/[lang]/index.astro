---
  // Start of import block -------
  import langs from '../../data/lang.js'
  import { getPageByUID, getAllFormattedLanguages } from '../../lib/prismic.js'
  
  import BaseLayout from '../../components/layout/BaseLayout.astro'
  import Testimonials from '../../components/layout/Testimonials.astro'
  
  import ContactForm from '../../components/cards/ContactForm.svelte'

  import Hero from '../../components/layout/Hero.astro'
  import Subhero from '../../components/layout/Subhero.astro'
  import Slicezone from '../../components/layout/Slicezone.astro'
  import Work from '../../components/layout/Work.astro'

  // End of import block -------

  const { lang } = Astro.request.params
  const { data: page } = await getPageByUID('homepage', 'home', {
    lang,
    fetchLinks: [
      'testimonial.client', 
      'testimonial.avatar', 
      'testimonial.role', 
      'testimonial.project_name', 
      'testimonial.project_link', 
      'testimonial.variant',
      'testimonial.testimonial'
    ]
  })

  export async function getStaticPaths() {
    const languages = await getAllFormattedLanguages()
    return languages.map(lang => ({
      params: { lang },
    }))
  }
---
<style lang="scss">
  main {
    position: relative;

    header {
      nav {
        display: flex;
        justify-content: center;
        align-items: center;

        padding: 2.8rem 4rem;

        border-radius: 1rem;

        img {
          width: 7.5rem;
        }
      }
    }
  }
</style>

<BaseLayout 
  title={page.page_title}
  description={page.page_description}
  headerCta={page.primary_cta_label}
  permalink="https://todomir.dev"
  canonicalURL="https://todomir.dev"
  lang={lang}
>
  <Hero 
    content={{ 
      title: page.hero_title,
      paragraph: page.hero_paragraph,
      primary_cta: page.primary_cta_label,
      secondary_cta: page.secondary_cta_label
    }}
  />
  <Slicezone slices={page.body} />
  <Work />
  <Testimonials />
  <Subhero />
  <ContactForm client:visible />
</BaseLayout>
